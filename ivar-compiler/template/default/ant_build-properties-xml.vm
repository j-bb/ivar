##
##   Copyright (c) 2004-2020, Jean-Baptiste BRIAUD. All Rights Reserved.
##
##   Licensed under the Apache License, Version 2.0 (the "License");
##   you may not use this file except in compliance with the License.
##   You may obtain a copy of the License at
##
##       http://www.apache.org/licenses/LICENSE-2.0
##
##   Unless required by applicable law or agreed to in writing, software
##   distributed under the License is distributed on an "AS IS" BASIS,
##   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
##   See the License for the specific language governing permissions and
##   limitations under the License
##
#parse("common/common.vm")
<?xml version="1.0" encoding="UTF-8"?>
#parse( "common/xml_general_copyright.vm" )

<project name="${application.getKeyname()}-build-properties">
    <description>
        Build file generated by Orbiter Engine for the application ${application.getKeyname()} properties
    </description>

    <property name="jeecontainer.login" value="${targappConfig.getTomcatManagerUser()}"/>
    <property name="jeecontainer.password" value="${targappConfig.getTomcatManagerPassword()}"/>
    <property name="jeecontainer.port" value="${targappConfig.getTomcatPort()}"/>
    <property name="db.root.password" value="${targappConfig.getDbRootPassword()}"/>
    <property name="db.user.login" value="${application.getDBUser()}"/>
    <property name="db.user.password" value="${application.getDBPass()}"/>
    <property name="db.port" value="${targappConfig.getDbPort()}"/>

    <!-- general properties section -->
    <property name="build.compiler" value="javac1.6"/>##2020 javac10+
    <property name="java-version" value="1.6"/> ##2020 10
    <property name="root-dir" value="."/>
    <property name="src-dir" value="${dollar}{root-dir}/src"/>
    <property name="web-dir" value="${dollar}{root-dir}/web"/>
    <property name="postcompile-web-dir" value="${dollar}{root-dir}/post-compile/web"/>
    <property name="postcompile-icons-dir" value="${dollar}{root-dir}/post-compile/icons"/>
    <property name="bin-dir" value="${dollar}{root-dir}/classes"/>
    <property name="webinf-lib-dir" value="${dollar}{root-dir}/webinflib"/>
    <property name="targapp-lib-dir" value="${properties.getTargappLibDir()}"/>
    <property name="java-dep-dir" value="${properties.getTargappDepDir()}"/>
    <property name="qooxdoo-sdk" value="${properties.getQxsdkDir()}"/>
#if(${compiler.isProd()})
    <property name="icons-dir" value="${dollar}{root-dir}/icons"/>
    <property name="prodvalue" value="prod"/>
#else
    <property name="prodvalue" value="dev"/>
#end

    <!-- PROPERTY -->
    <property name="qxsdk-dir" value="${properties.getQxsdkDir()}"/>
    ##    <property name="java-home-placeholder-for-prod"/>

    <path id="compile-classpath">
        <fileset dir="${dollar}{webinf-lib-dir}">
            <include name="**/*.jar"/>
        </fileset>
    ##        Used at least for JEE.jar :

        <fileset dir="${dollar}{root-dir}/build-lib">
            <include name="**/*.jar"/>
        </fileset>
    </path>

    <target name="debug" unless="debug-already-there">
        <echo message="********** Begin DUMP Ant variables for ${application.getKeyname()} **********"/>
        <echo message="PATH=${dollar}{PATH}"/>
        <echo message="JAVA_HOME=${dollar}{JAVA_HOME}"/>
        <echo message="build.compiler=${dollar}{build.compiler}"/>
        <echo message="java-version=${dollar}{java-version}"/>
        <echo message="basedir=${dollar}{basedir}"/>
        <echo message="root-dir=${dollar}{root-dir}"/>
        <echo message="web-dir=${dollar}{web-dir}"/>
        <echo message="src-dir=${dollar}{src-dir}"/>
        <echo message="bin-dir=${dollar}{bin-dir}"/>
        <echo message="webinf-lib-dir=${dollar}{webinf-lib-dir}"/>
        <echo message="qooxdoo-sdk=${dollar}{qooxdoo-sdk}"/>
        <exec executable="python" failonerror="yes">
            <arg line="-V"/>
        </exec>
        <property name="debug-already-there" value="true"/>
#if(${compiler.isProd()})
            <echo message="icons-dir=${dollar}{icons-dir}"/>
#end
        <echo message="prodvalue=${dollar}{prodvalue}"/>

        <!-- PROPERTY -->
        <echo message="qxsdk-dir=${dollar}{qxsdk-dir}"/>
        <echo message="********** End DUMP Ant variables for ${application.getKeyname()} **********"/>
    </target>
</project>